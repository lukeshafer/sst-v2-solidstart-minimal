import{q as K,D as X,x as G,j as Y,y as J,p as Z,z as Q,T as ee}from"./index-Dv-hs8cT.js";var re=(e=>(e[e.AggregateError=1]="AggregateError",e[e.ArrowFunction=2]="ArrowFunction",e[e.ErrorPrototypeStack=4]="ErrorPrototypeStack",e[e.ObjectAssign=8]="ObjectAssign",e[e.BigIntTypedArray=16]="BigIntTypedArray",e))(re||{});function te(e){switch(e){case'"':return'\\"';case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"\b":return"\\b";case"	":return"\\t";case"\f":return"\\f";case"<":return"\\x3C";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return}}function l(e){let r="",t=0,a;for(let i=0,n=e.length;i<n;i++)a=te(e[i]),a&&(r+=e.slice(t,i)+a,t=i+1);return t===0?r=e:r+=e.slice(t),r}var h="__SEROVAL_REFS__";function z(e,r){if(!e)throw r}var B=new Map,y=new Map;function R(e){return B.has(e)}function ae(e){return z(R(e),new Me(e)),B.get(e)}typeof globalThis<"u"?Object.defineProperty(globalThis,h,{value:y,configurable:!0,writable:!1,enumerable:!1}):typeof window<"u"?Object.defineProperty(window,h,{value:y,configurable:!0,writable:!1,enumerable:!1}):typeof self<"u"?Object.defineProperty(self,h,{value:y,configurable:!0,writable:!1,enumerable:!1}):typeof global<"u"&&Object.defineProperty(global,h,{value:y,configurable:!0,writable:!1,enumerable:!1});function L(e,r){for(let t=0,a=r.length;t<a;t++){let i=r[t];e.has(i)||(e.add(i),i.extends&&L(e,i.extends))}}function ie(e){if(e){let r=new Set;return L(r,e),[...r]}}var V={[Symbol.asyncIterator]:0,[Symbol.hasInstance]:1,[Symbol.isConcatSpreadable]:2,[Symbol.iterator]:3,[Symbol.match]:4,[Symbol.matchAll]:5,[Symbol.replace]:6,[Symbol.search]:7,[Symbol.species]:8,[Symbol.split]:9,[Symbol.toPrimitive]:10,[Symbol.toStringTag]:11,[Symbol.unscopables]:12},ne={0:"Error",1:"EvalError",2:"RangeError",3:"ReferenceError",4:"SyntaxError",5:"TypeError",6:"URIError"};function d(e){return{t:2,i:void 0,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}var P=d(2),T=d(3),se=d(1),oe=d(0),ue=d(4),de=d(5),ce=d(6),le=d(7);function x(e){return e instanceof EvalError?1:e instanceof RangeError?2:e instanceof ReferenceError?3:e instanceof SyntaxError?4:e instanceof TypeError?5:e instanceof URIError?6:0}function ve(e){let r=ne[x(e)];return e.name!==r?{name:e.name}:e.constructor.name!==r?{name:e.constructor.name}:{}}function k(e,r){let t=ve(e),a=Object.getOwnPropertyNames(e);for(let i=0,n=a.length,o;i<n;i++)o=a[i],o!=="name"&&o!=="message"&&(o==="stack"?r&4&&(t=t||{},t[o]=e[o]):(t=t||{},t[o]=e[o]));return t}function q(e){return Object.isFrozen(e)?3:Object.isSealed(e)?2:Object.isExtensible(e)?0:1}function pe(e){switch(e){case Number.POSITIVE_INFINITY:return de;case Number.NEGATIVE_INFINITY:return ce}return e!==e?le:Object.is(e,-0)?ue:{t:0,i:void 0,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function U(e){return{t:1,i:void 0,s:l(e),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function fe(e){return{t:3,i:void 0,s:""+e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function he(e){return{t:4,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function ye(e,r){return{t:5,i:e,s:r.toISOString(),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,f:void 0,a:void 0,b:void 0,o:void 0}}function me(e,r){return{t:6,i:e,s:void 0,l:void 0,c:l(r.source),m:r.flags,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function be(e,r){let t=new Uint8Array(r),a=t.length,i=new Array(a);for(let n=0;n<a;n++)i[n]=t[n];return{t:19,i:e,s:i,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function we(e,r){return{t:17,i:e,s:V[r],l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function _(e,r){return{t:18,i:e,s:l(ae(r)),l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function ge(e,r,t){return{t:25,i:e,s:t,l:void 0,c:l(r),m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Se(e,r,t){return{t:9,i:e,s:void 0,l:r.length,c:void 0,m:void 0,p:void 0,e:void 0,a:t,f:void 0,b:void 0,o:q(r)}}function Ee(e,r){return{t:21,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:void 0,o:void 0}}function ze(e,r,t){return{t:15,i:e,s:void 0,l:r.length,c:r.constructor.name,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:r.byteOffset,o:void 0}}function Re(e,r,t){return{t:16,i:e,s:void 0,l:r.length,c:r.constructor.name,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:r.byteOffset,o:void 0}}function xe(e,r,t){return{t:20,i:e,s:void 0,l:r.byteLength,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:t,b:r.byteOffset,o:void 0}}function Ie(e,r,t){return{t:13,i:e,s:x(r),l:void 0,c:void 0,m:l(r.message),p:t,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function Ae(e,r,t){return{t:14,i:e,s:x(r),l:void 0,c:void 0,m:l(r.message),p:t,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}function $e(e,r,t){return{t:7,i:e,s:void 0,l:r,c:void 0,m:void 0,p:void 0,e:void 0,a:t,f:void 0,b:void 0,o:void 0}}function Fe(e,r){return{t:28,i:void 0,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[e,r],f:void 0,b:void 0,o:void 0}}function Oe(e,r){return{t:30,i:void 0,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[e,r],f:void 0,b:void 0,o:void 0}}function Pe(e,r,t){return{t:31,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:t,f:r,b:void 0,o:void 0}}function Te(e,r){return{t:32,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:void 0,o:void 0}}function ke(e,r){return{t:33,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:void 0,o:void 0}}function Ue(e,r){return{t:34,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:r,b:void 0,o:void 0}}var{toString:I}=Object.prototype;function _e(e,r){return r instanceof Error?`Seroval caught an error during the ${e} process.
  
${r.name}
${r.message}

- For more information, please check the "cause" property of this error.
- If you believe this is an error in Seroval, please submit an issue at https://github.com/lxsmnsyc/seroval/issues/new`:`Seroval caught an error during the ${e} process.

"${I.call(r)}"

For more information, please check the "cause" property of this error.`}var je=class extends Error{constructor(r,t){super(_e(r,t)),this.cause=t}},Ce=class extends je{constructor(e){super("parsing",e)}},b=class extends Error{constructor(r){super(`The value ${I.call(r)} of type "${typeof r}" cannot be parsed/serialized.
      
There are few workarounds for this problem:
- Transform the value in a way that it can be serialized.
- If the reference is present on multiple runtimes (isomorphic), you can use the Reference API to map the references.`),this.value=r}},Me=class extends Error{constructor(e){super('Missing reference for the value "'+I.call(e)+'" of type "'+typeof e+'"'),this.value=e}},Ne=class{constructor(r,t){this.value=r,this.replacement=t}},De={},Be={},Le={0:{},1:{},2:{},3:{},4:{}};function Ve(e){return"__SEROVAL_STREAM__"in e}function A(){let e=new Set,r=[],t=!0,a=!0;function i(s){for(let u of e.keys())u.next(s)}function n(s){for(let u of e.keys())u.throw(s)}function o(s){for(let u of e.keys())u.return(s)}return{__SEROVAL_STREAM__:!0,on(s){t&&e.add(s);for(let u=0,v=r.length;u<v;u++){let c=r[u];u===v-1&&!t?a?s.return(c):s.throw(c):s.next(c)}return()=>{t&&e.delete(s)}},next(s){t&&(r.push(s),i(s))},throw(s){t&&(r.push(s),n(s),t=!1,a=!1,e.clear())},return(s){t&&(r.push(s),o(s),t=!1,a=!0,e.clear())}}}function qe(e){let r=A(),t=e[Symbol.asyncIterator]();async function a(){try{let i=await t.next();i.done?r.return(i.value):(r.next(i.value),await a())}catch(i){r.throw(i)}}return a().catch(()=>{}),r}function We(e){let r=[],t=-1,a=-1,i=e[Symbol.iterator]();for(;;)try{let n=i.next();if(r.push(n.value),n.done){a=r.length-1;break}}catch(n){t=r.length,r.push(n)}return{v:r,t,d:a}}async function He(e){try{return[1,await e]}catch(r){return[0,r]}}var Ke=class{constructor(e){this.marked=new Set,this.plugins=e.plugins,this.features=31^(e.disabledFeatures||0),this.refs=e.refs||new Map}markRef(e){this.marked.add(e)}isMarked(e){return this.marked.has(e)}getIndexedValue(e){let r=this.refs.get(e);if(r!=null)return this.markRef(r),{type:1,value:he(r)};let t=this.refs.size;return this.refs.set(e,t),{type:0,value:t}}getReference(e){let r=this.getIndexedValue(e);return r.type===1?r:R(e)?{type:2,value:_(r.value,e)}:r}getStrictReference(e){z(R(e),new b(e));let r=this.getIndexedValue(e);return r.type===1?r.value:_(r.value,e)}parseFunction(e){return this.getStrictReference(e)}parseWellKnownSymbol(e){let r=this.getReference(e);return r.type!==0?r.value:(z(e in V,new b(e)),we(r.value,e))}parseSpecialReference(e){let r=this.getIndexedValue(Le[e]);return r.type===1?r.value:{t:26,i:r.value,s:e,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:void 0,b:void 0,o:void 0}}parseIteratorFactory(){let e=this.getIndexedValue(De);return e.type===1?e.value:{t:27,i:e.value,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:this.parseWellKnownSymbol(Symbol.iterator),b:void 0,o:void 0}}parseAsyncIteratorFactory(){let e=this.getIndexedValue(Be);return e.type===1?e.value:{t:29,i:e.value,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:[this.parseSpecialReference(1),this.parseWellKnownSymbol(Symbol.asyncIterator)],f:void 0,b:void 0,o:void 0}}createObjectNode(e,r,t,a){return{t:t?11:10,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:a,e:void 0,a:void 0,f:void 0,b:void 0,o:q(r)}}createMapNode(e,r,t,a){return{t:8,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:{k:r,v:t,s:a},a:void 0,f:this.parseSpecialReference(0),b:void 0,o:void 0}}createPromiseConstructorNode(e){return{t:22,i:e,s:void 0,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:this.parseSpecialReference(1),b:void 0,o:void 0}}},Xe=class extends Ke{async parseItems(e){let r=[];for(let t=0,a=e.length;t<a;t++)t in e&&(r[t]=await this.parse(e[t]));return r}async parseArray(e,r){return Se(e,r,await this.parseItems(r))}async parseProperties(e){let r=Object.entries(e),t=[],a=[];for(let n=0,o=r.length;n<o;n++)t.push(l(r[n][0])),a.push(await this.parse(r[n][1]));let i=Symbol.iterator;return i in e&&(t.push(this.parseWellKnownSymbol(i)),a.push(Fe(this.parseIteratorFactory(),await this.parse(We(e))))),i=Symbol.asyncIterator,i in e&&(t.push(this.parseWellKnownSymbol(i)),a.push(Oe(this.parseAsyncIteratorFactory(),await this.parse(qe(e))))),i=Symbol.toStringTag,i in e&&(t.push(this.parseWellKnownSymbol(i)),a.push(U(e[i]))),i=Symbol.isConcatSpreadable,i in e&&(t.push(this.parseWellKnownSymbol(i)),a.push(e[i]?P:T)),{k:t,v:a,s:t.length}}async parsePlainObject(e,r,t){return this.createObjectNode(e,r,t,await this.parseProperties(r))}async parseBoxed(e,r){return Ee(e,await this.parse(r.valueOf()))}async parseTypedArray(e,r){return ze(e,r,await this.parse(r.buffer))}async parseBigIntTypedArray(e,r){return Re(e,r,await this.parse(r.buffer))}async parseDataView(e,r){return xe(e,r,await this.parse(r.buffer))}async parseError(e,r){let t=k(r,this.features);return Ie(e,r,t?await this.parseProperties(t):void 0)}async parseAggregateError(e,r){let t=k(r,this.features);return Ae(e,r,t?await this.parseProperties(t):void 0)}async parseMap(e,r){let t=[],a=[];for(let[i,n]of r.entries())t.push(await this.parse(i)),a.push(await this.parse(n));return this.createMapNode(e,t,a,r.size)}async parseSet(e,r){let t=[];for(let a of r.keys())t.push(await this.parse(a));return $e(e,r.size,t)}async parsePromise(e,r){let[t,a]=await He(r);return{t:12,i:e,s:t,l:void 0,c:void 0,m:void 0,p:void 0,e:void 0,a:void 0,f:await this.parse(a),b:void 0,o:void 0}}async parsePlugin(e,r){let t=this.plugins;if(t)for(let a=0,i=t.length;a<i;a++){let n=t[a];if(n.parse.async&&n.test(r))return ge(e,n.tag,await n.parse.async(r,this,{id:e}))}}async parseStream(e,r){return Pe(e,this.parseSpecialReference(4),await new Promise((t,a)=>{let i=[],n=r.on({next:o=>{this.markRef(e),this.parse(o).then(s=>{i.push(Te(e,s))},s=>{a(s),n()})},throw:o=>{this.markRef(e),this.parse(o).then(s=>{i.push(ke(e,s)),t(i),n()},s=>{a(s),n()})},return:o=>{this.markRef(e),this.parse(o).then(s=>{i.push(Ue(e,s)),t(i),n()},s=>{a(s),n()})}})}))}async parseObject(e,r){if(Array.isArray(r))return this.parseArray(e,r);if(Ve(r))return this.parseStream(e,r);let t=r.constructor;if(t===Ne)return this.parse(r.replacement);let a=await this.parsePlugin(e,r);if(a)return a;switch(t){case Object:return this.parsePlainObject(e,r,!1);case void 0:return this.parsePlainObject(e,r,!0);case Date:return ye(e,r);case RegExp:return me(e,r);case Error:case EvalError:case RangeError:case ReferenceError:case SyntaxError:case TypeError:case URIError:return this.parseError(e,r);case Number:case Boolean:case String:case BigInt:return this.parseBoxed(e,r);case ArrayBuffer:return be(e,r);case Int8Array:case Int16Array:case Int32Array:case Uint8Array:case Uint16Array:case Uint32Array:case Uint8ClampedArray:case Float32Array:case Float64Array:return this.parseTypedArray(e,r);case DataView:return this.parseDataView(e,r);case Map:return this.parseMap(e,r);case Set:return this.parseSet(e,r)}if(t===Promise||r instanceof Promise)return this.parsePromise(e,r);let i=this.features;if(i&16)switch(t){case BigInt64Array:case BigUint64Array:return this.parseBigIntTypedArray(e,r)}if(i&1&&typeof AggregateError<"u"&&(t===AggregateError||r instanceof AggregateError))return this.parseAggregateError(e,r);if(r instanceof Error)return this.parseError(e,r);if(Symbol.iterator in r||Symbol.asyncIterator in r)return this.parsePlainObject(e,r,!!t);throw new b(r)}async parse(e){try{switch(typeof e){case"boolean":return e?P:T;case"undefined":return se;case"string":return U(e);case"number":return pe(e);case"bigint":return fe(e);case"object":{if(e){let r=this.getReference(e);return r.type===0?await this.parseObject(r.value,e):r.value}return oe}case"symbol":return this.parseWellKnownSymbol(e);case"function":return this.parseFunction(e);default:throw new b(e)}}catch(r){throw new Ce(r)}}},Ge=class extends Xe{constructor(){super(...arguments),this.mode="vanilla"}};function Ye(e){return(0,eval)(e)}async function W(e,r={}){let t=ie(r.plugins),a=new Ge({plugins:t,disabledFeatures:r.disabledFeatures});return{t:await a.parse(e),f:a.features,m:Array.from(a.marked)}}function w(e){return{detail:e.detail,bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var Je={tag:"seroval-plugins/web/CustomEvent",test(e){return typeof CustomEvent>"u"?!1:e instanceof CustomEvent},parse:{sync(e,r){return{type:r.parse(e.type),options:r.parse(w(e))}},async async(e,r){return{type:await r.parse(e.type),options:await r.parse(w(e))}},stream(e,r){return{type:r.parse(e.type),options:r.parse(w(e))}}},serialize(e,r){return"new CustomEvent("+r.serialize(e.type)+","+r.serialize(e.options)+")"},deserialize(e,r){return new CustomEvent(r.deserialize(e.type),r.deserialize(e.options))}},Ze=Je,Qe={tag:"seroval-plugins/web/DOMException",test(e){return typeof DOMException>"u"?!1:e instanceof DOMException},parse:{sync(e,r){return{name:r.parse(e.name),message:r.parse(e.message)}},async async(e,r){return{name:await r.parse(e.name),message:await r.parse(e.message)}},stream(e,r){return{name:r.parse(e.name),message:r.parse(e.message)}}},serialize(e,r){return"new DOMException("+r.serialize(e.message)+","+r.serialize(e.name)+")"},deserialize(e,r){return new DOMException(r.deserialize(e.message),r.deserialize(e.name))}},er=Qe;function g(e){return{bubbles:e.bubbles,cancelable:e.cancelable,composed:e.composed}}var rr={tag:"seroval-plugins/web/Event",test(e){return typeof Event>"u"?!1:e instanceof Event},parse:{sync(e,r){return{type:r.parse(e.type),options:r.parse(g(e))}},async async(e,r){return{type:await r.parse(e.type),options:await r.parse(g(e))}},stream(e,r){return{type:r.parse(e.type),options:r.parse(g(e))}}},serialize(e,r){return"new Event("+r.serialize(e.type)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Event(r.deserialize(e.type),r.deserialize(e.options))}},tr=rr,ar={tag:"seroval-plugins/web/File",test(e){return typeof File>"u"?!1:e instanceof File},parse:{async async(e,r){return{name:await r.parse(e.name),options:await r.parse({type:e.type,lastModified:e.lastModified}),buffer:await r.parse(await e.arrayBuffer())}}},serialize(e,r){return"new File(["+r.serialize(e.buffer)+"],"+r.serialize(e.name)+","+r.serialize(e.options)+")"},deserialize(e,r){return new File([r.deserialize(e.buffer)],r.deserialize(e.name),r.deserialize(e.options))}},ir=ar;function S(e){let r=[];return e.forEach((t,a)=>{r.push([a,t])}),r}var p={},nr={tag:"seroval-plugins/web/FormDataFactory",test(e){return e===p},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,r){return r.createEffectfulFunction(["e","f","i","s","t"],"f=new FormData;for(i=0,s=e.length;i<s;i++)f.append((t=e[i])[0],t[1]);return f")},deserialize(){return p}},sr={tag:"seroval-plugins/web/FormData",extends:[ir,nr],test(e){return typeof FormData>"u"?!1:e instanceof FormData},parse:{sync(e,r){return{factory:r.parse(p),entries:r.parse(S(e))}},async async(e,r){return{factory:await r.parse(p),entries:await r.parse(S(e))}},stream(e,r){return{factory:r.parse(p),entries:r.parse(S(e))}}},serialize(e,r){return"("+r.serialize(e.factory)+")("+r.serialize(e.entries)+")"},deserialize(e,r){let t=new FormData,a=r.deserialize(e.entries);for(let i=0,n=a.length;i<n;i++){let o=a[i];t.append(o[0],o[1])}return t}},or=sr;function E(e){let r=[];return e.forEach((t,a)=>{r.push([a,t])}),r}var ur={tag:"seroval-plugins/web/Headers",test(e){return typeof Headers>"u"?!1:e instanceof Headers},parse:{sync(e,r){return r.parse(E(e))},async async(e,r){return await r.parse(E(e))},stream(e,r){return r.parse(E(e))}},serialize(e,r){return"new Headers("+r.serialize(e)+")"},deserialize(e,r){return new Headers(r.deserialize(e))}},$=ur,f={},dr={tag:"seroval-plugins/web/ReadableStreamFactory",test(e){return e===f},parse:{sync(){},async async(){return await Promise.resolve(void 0)},stream(){}},serialize(e,r){return r.createFunction(["d"],"new ReadableStream({start:"+r.createEffectfulFunction(["c"],"d.on({next:"+r.createEffectfulFunction(["v"],"c.enqueue(v)")+",throw:"+r.createEffectfulFunction(["v"],"c.error(v)")+",return:"+r.createEffectfulFunction([],"c.close()")+"})")+"})")},deserialize(){return f}};function j(e){let r=A(),t=e.getReader();async function a(){try{let i=await t.read();i.done?r.return(i.value):(r.next(i.value),await a())}catch(i){r.throw(i)}}return a().catch(()=>{}),r}var cr={tag:"seroval/plugins/web/ReadableStream",extends:[dr],test(e){return typeof ReadableStream>"u"?!1:e instanceof ReadableStream},parse:{sync(e,r){return{factory:r.parse(f),stream:r.parse(A())}},async async(e,r){return{factory:await r.parse(f),stream:await r.parse(j(e))}},stream(e,r){return{factory:r.parse(f),stream:r.parse(j(e))}}},serialize(e,r){return"("+r.serialize(e.factory)+")("+r.serialize(e.stream)+")"},deserialize(e,r){let t=r.deserialize(e.stream);return new ReadableStream({start(a){t.on({next(i){a.enqueue(i)},throw(i){a.error(i)},return(){a.close()}})}})}},F=cr;function C(e,r){return{body:r,cache:e.cache,credentials:e.credentials,headers:e.headers,integrity:e.integrity,keepalive:e.keepalive,method:e.method,mode:e.mode,redirect:e.redirect,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var lr={tag:"seroval-plugins/web/Request",extends:[F,$],test(e){return typeof Request>"u"?!1:e instanceof Request},parse:{async async(e,r){return{url:await r.parse(e.url),options:await r.parse(C(e,e.body?await e.clone().arrayBuffer():null))}},stream(e,r){return{url:r.parse(e.url),options:r.parse(C(e,e.clone().body))}}},serialize(e,r){return"new Request("+r.serialize(e.url)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Request(r.deserialize(e.url),r.deserialize(e.options))}},vr=lr;function M(e){return{headers:e.headers,status:e.status,statusText:e.statusText}}var pr={tag:"seroval-plugins/web/Response",extends:[F,$],test(e){return typeof Response>"u"?!1:e instanceof Response},parse:{async async(e,r){return{body:await r.parse(e.body?await e.clone().arrayBuffer():null),options:await r.parse(M(e))}},stream(e,r){return{body:r.parse(e.clone().body),options:r.parse(M(e))}}},serialize(e,r){return"new Response("+r.serialize(e.body)+","+r.serialize(e.options)+")"},deserialize(e,r){return new Response(r.deserialize(e.body),r.deserialize(e.options))}},fr=pr,hr={tag:"seroval-plugins/web/URLSearchParams",test(e){return typeof URLSearchParams>"u"?!1:e instanceof URLSearchParams},parse:{sync(e,r){return r.parse(e.toString())},async async(e,r){return await r.parse(e.toString())},stream(e,r){return r.parse(e.toString())}},serialize(e,r){return"new URLSearchParams("+r.serialize(e)+")"},deserialize(e,r){return new URLSearchParams(r.deserialize(e))}},yr=hr,mr={tag:"seroval-plugins/web/URL",test(e){return typeof URL>"u"?!1:e instanceof URL},parse:{sync(e,r){return r.parse(e.href)},async async(e,r){return await r.parse(e.href)},stream(e,r){return r.parse(e.href)}},serialize(e,r){return"new URL("+r.serialize(e)+")"},deserialize(e,r){return new URL(r.deserialize(e))}},br=mr;class wr{reader;buffer;done;constructor(r){this.reader=r.getReader(),this.buffer=new Uint8Array(0),this.done=!1}async readChunk(){const r=await this.reader.read();if(r.done)this.done=!0;else{let t=new Uint8Array(this.buffer.length+r.value.length);t.set(this.buffer),t.set(r.value,this.buffer.length),this.buffer=t}}async next(){if(this.buffer.length===0)return this.done?{done:!0,value:void 0}:(await this.readChunk(),await this.next());const r=new TextDecoder().decode(this.buffer.subarray(1,11)),t=Number.parseInt(r,16);for(;t>this.buffer.length-12;){if(this.done)throw new Error("Malformed server function stream.");await this.readChunk()}const a=new TextDecoder().decode(this.buffer.subarray(12,12+t));return this.buffer=this.buffer.subarray(12+t),{done:!1,value:Ye(a)}}async drain(){for(;!(await this.next()).done;);}}async function N(e,r){if(!r.body)throw new Error("missing body");const t=new wr(r.body),a=await t.next();return a.done||t.drain().then(()=>{delete $R[e]},()=>{}),a.value}let gr=0;function m(e,r,t,a){return fetch(e,{method:"POST",...a,headers:{...a.headers,"X-Server-Id":r,"X-Server-Instance":t}})}const H=[Ze,er,tr,or,$,F,vr,fr,yr,br];async function D(e,r,t,a){const i=`server-fn:${gr++}`,n=await(a.length===0?m(e,r,i,t):a.length===1&&a[0]instanceof FormData?m(e,r,i,{...t,body:a[0]}):a.length===1&&a[0]instanceof URLSearchParams?m(e,r,i,{...t,body:a[0],headers:{...t.headers,"Content-Type":"application/x-www-form-urlencoded"}}):m(e,r,i,{...t,body:JSON.stringify(await Promise.resolve(W(a,{plugins:H}))),headers:{...t.headers,"Content-Type":"application/json"}}));if(n.headers.has("Location")||n.headers.has("X-Revalidate")||n.headers.has("X-Single-Flight"))return n.body&&(n.customBody=()=>N(i,n)),n;const o=n.headers.get("Content-Type");let s;if(o&&o.startsWith("text/plain")?s=await n.text():o&&o.startsWith("application/json")?s=await n.json():s=await N(i,n),n.headers.has("X-Error"))throw s;return s}function Sr(e,r,t){const a="";return new Proxy(e,{get(i,n,o){if(n==="url")return`${a}/_server?id=${encodeURIComponent(r)}&name=${encodeURIComponent(t)}`;if(n==="GET")return o.withOptions({method:"GET"});if(n==="withOptions"){const s=`${a}/_server/?id=${encodeURIComponent(r)}&name=${encodeURIComponent(t)}`;return u=>{const v=async(...c)=>{const O=u.method&&u.method.toUpperCase()==="GET";return D(O?s+(c.length?`&args=${encodeURIComponent(JSON.stringify(await Promise.resolve(W(c,{plugins:H}))))}`:""):`${a}/_server`,`${r}#${t}`,u,O?[]:c)};return v.url=s,v}}return i[n]},apply(i,n,o){return D(`${a}/_server`,`${r}#${t}`,{},o)}})}const Er=Sr(()=>{},"c_oda60i","default");var zr=Q("<main><!$><!/><h1>Hello world!</h1><button>Click Me");function $r(){return(()=>{var e=K(zr),r=e.firstChild,[t,a]=X(r.nextSibling),i=t.nextSibling,n=i.nextSibling;return G(e,Y(ee,{children:"Hello World"}),t,a),n.$$click=()=>{Er().then(console.log)},J(),e})()}Z(["click"]);export{$r as default};
